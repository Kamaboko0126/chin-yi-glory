import{d as z,u as G,r as g,o as N,w,a as i,f as d,j as r,b as s,F as b,l as C,e as P,g as v,t as V,i as B,_ as H}from"./index-C9HnG39O.js";const K={class:"gallery-main"},X={class:"image-container"},q={class:"image-wrapper"},x=["src","alt","onError","onLoad"],J={class:"description-content"},O=["onClick","aria-label"],Q=["disabled"],R=["disabled"],U={key:0,class:"gallery-thumbnails"},W=["onClick"],Y=["src","alt"],Z={key:1,class:"gallery-indicators"},ee=["onClick"],ae=z({__name:"DynamicCardGroup",props:{items:{},localeFile:{},autoplayInterval:{default:8e3},showThumbnails:{type:Boolean,default:!0}},setup(F){const u=F,{locale:$,t:S}=G(),a=g([]),o=g(0),p=g(!0),h=g(null),c=g(new Set);async function I(e){try{const t=await fetch(`/locales/${e}/${u.localeFile}.json`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();B.global.setLocaleMessage(e,{...B.global.getLocaleMessage(e),...n}),console.log(`Successfully loaded ${e} messages for ${u.localeFile}`)}catch(t){console.error(`Failed to load ${e} messages for ${u.localeFile}:`,t)}}function _(){a.value=u.items.map(e=>(console.log("Loading image:",e.image),{image:e.image,description:S(e.descriptionKey)}))}function j(e){c.value.has(e)?c.value.delete(e):c.value.add(e)}function L(e){return e.length>80}function M(e){o.value=e,y()}function A(){o.value=(o.value+1)%a.value.length,y()}function T(){o.value=o.value===0?a.value.length-1:o.value-1,y()}function m(){u.autoplayInterval>0&&a.value.length>1&&(h.value=window.setInterval(()=>{p.value&&(o.value=(o.value+1)%a.value.length)},u.autoplayInterval))}function f(){h.value&&(clearInterval(h.value),h.value=null)}function y(){f(),p.value&&m()}function D(){p.value=!1}function E(){p.value=!0,y()}return N(async()=>{await I($.value),_(),m()}),w($,async e=>{console.log(`Locale changed to: ${e}`),await I(e),_()}),w(()=>u.items,()=>{_(),o.value=0,f(),m()},{deep:!0}),w(()=>a.value.length,e=>{e===0?f():(f(),m())}),(e,t)=>a.value.length>0?(r(),i("div",{key:0,class:"art-gallery",onMouseenter:D,onMouseleave:E},[s("div",K,[s("div",X,[(r(!0),i(b,null,C(a.value,(n,l)=>(r(),i("div",{class:v(["image-slide",{active:l===o.value}]),key:l,style:P({transform:`translateX(${(l-o.value)*100}%)`})},[s("div",q,[s("img",{src:n.image,alt:n.description,onError:k=>console.error("Image failed to load:",n.image,k),onLoad:()=>console.log("Image loaded successfully:",n.image)},null,40,x)]),s("div",{class:v(["image-description-area",{expanded:c.value.has(l)}])},[s("div",J,[s("p",{class:v(["image-description",{"can-expand":L(n.description),expanded:c.value.has(l)}])},V(n.description),3),L(n.description)?(r(),i("button",{key:0,class:"expand-btn",onClick:k=>j(l),"aria-label":c.value.has(l)?"收起":"展開"},[(r(),i("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",class:v({rotated:c.value.has(l)})},t[0]||(t[0]=[s("path",{d:"M6 9L12 15L18 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]),2))],8,O)):d("",!0)])],2)],6))),128))]),a.value.length>1?(r(),i("button",{key:0,class:"nav-arrow nav-prev",onClick:T,disabled:a.value.length<=1},t[1]||(t[1]=[s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M15 18L9 12L15 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,Q)):d("",!0),a.value.length>1?(r(),i("button",{key:1,class:"nav-arrow nav-next",onClick:A,disabled:a.value.length<=1},t[2]||(t[2]=[s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,R)):d("",!0)]),e.showThumbnails&&a.value.length>1?(r(),i("div",U,[(r(!0),i(b,null,C(a.value,(n,l)=>(r(),i("button",{class:v(["thumbnail",{active:l===o.value}]),key:`thumb-${l}`,onClick:k=>M(l)},[s("img",{src:n.image,alt:n.description},null,8,Y),t[3]||(t[3]=s("div",{class:"thumbnail-overlay"},null,-1))],10,W))),128))])):d("",!0),!e.showThumbnails&&a.value.length>1?(r(),i("div",Z,[(r(!0),i(b,null,C(a.value,(n,l)=>(r(),i("button",{class:v(["indicator",{active:l===o.value}]),key:`indicator-${l}`,onClick:k=>M(l)},null,10,ee))),128))])):d("",!0)],32)):d("",!0)}}),te=H(ae,[["__scopeId","data-v-1ac05b18"]]);export{te as default};
