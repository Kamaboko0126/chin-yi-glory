import{d as P,u as V,r as g,o as z,w as b,c as o,f as d,j as n,a as t,F as w,p as C,b as G,g as v,t as N,h as K,i as A,k as O}from"./index-DR_d_DtA.js";const R={class:"gallery-main"},X={class:"image-container"},q={class:"image-wrapper"},x=["src","alt","onError","onLoad"],H={class:"description-content"},J=["onClick","aria-label"],Q=["disabled"],U=["disabled"],W={key:0,class:"gallery-thumbnails"},Y=["onClick"],Z=["src","alt"],ee={key:1,class:"gallery-indicators"},ae=["onClick"],le=P({__name:"DynamicCardGroup",props:{items:{},localeFile:{},autoplayInterval:{default:8e3},showThumbnails:{type:Boolean,default:!0}},setup(B){const u=B,{locale:$,t:F}=V(),a=g([]),s=g(0),p=g(!0),h=g(null),c=g(new Set);async function I(e){try{const i=await K(()=>import(`../../locales/${e}/${u.localeFile}.json`),[]);A.global.setLocaleMessage(e,{...A.global.getLocaleMessage(e),...i.default}),console.log(`Successfully loaded ${e} messages for ${u.localeFile}`)}catch(i){console.error(`Failed to load ${e} messages for ${u.localeFile}:`,i)}}function k(){a.value=u.items.map(e=>(console.log("Loading image:",e.image),{image:e.image,description:F(e.descriptionKey)}))}function S(e){c.value.has(e)?c.value.delete(e):c.value.add(e)}function L(e){return e.length>80}function M(e){s.value=e,y()}function D(){s.value=(s.value+1)%a.value.length,y()}function E(){s.value=s.value===0?a.value.length-1:s.value-1,y()}function m(){u.autoplayInterval>0&&a.value.length>1&&(h.value=window.setInterval(()=>{p.value&&(s.value=(s.value+1)%a.value.length)},u.autoplayInterval))}function f(){h.value&&(clearInterval(h.value),h.value=null)}function y(){f(),p.value&&m()}function j(){p.value=!1}function T(){p.value=!0,y()}return z(async()=>{await I($.value),k(),m()}),b($,async e=>{console.log(`Locale changed to: ${e}`),await I(e),k()}),b(()=>u.items,()=>{k(),s.value=0,f(),m()},{deep:!0}),b(()=>a.value.length,e=>{e===0?f():(f(),m())}),(e,i)=>a.value.length>0?(n(),o("div",{key:0,class:"art-gallery",onMouseenter:j,onMouseleave:T},[t("div",R,[t("div",X,[(n(!0),o(w,null,C(a.value,(r,l)=>(n(),o("div",{class:v(["image-slide",{active:l===s.value}]),key:l,style:G({transform:`translateX(${(l-s.value)*100}%)`})},[t("div",q,[t("img",{src:r.image,alt:r.description,onError:_=>console.error("Image failed to load:",r.image,_),onLoad:()=>console.log("Image loaded successfully:",r.image)},null,40,x)]),t("div",{class:v(["image-description-area",{expanded:c.value.has(l)}])},[t("div",H,[t("p",{class:v(["image-description",{"can-expand":L(r.description),expanded:c.value.has(l)}])},N(r.description),3),L(r.description)?(n(),o("button",{key:0,class:"expand-btn",onClick:_=>S(l),"aria-label":c.value.has(l)?"收起":"展開"},[(n(),o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",class:v({rotated:c.value.has(l)})},i[0]||(i[0]=[t("path",{d:"M6 9L12 15L18 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]),2))],8,J)):d("",!0)])],2)],6))),128))]),a.value.length>1?(n(),o("button",{key:0,class:"nav-arrow nav-prev",onClick:E,disabled:a.value.length<=1},i[1]||(i[1]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M15 18L9 12L15 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,Q)):d("",!0),a.value.length>1?(n(),o("button",{key:1,class:"nav-arrow nav-next",onClick:D,disabled:a.value.length<=1},i[2]||(i[2]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,U)):d("",!0)]),e.showThumbnails&&a.value.length>1?(n(),o("div",W,[(n(!0),o(w,null,C(a.value,(r,l)=>(n(),o("button",{class:v(["thumbnail",{active:l===s.value}]),key:`thumb-${l}`,onClick:_=>M(l)},[t("img",{src:r.image,alt:r.description},null,8,Z),i[3]||(i[3]=t("div",{class:"thumbnail-overlay"},null,-1))],10,Y))),128))])):d("",!0),!e.showThumbnails&&a.value.length>1?(n(),o("div",ee,[(n(!0),o(w,null,C(a.value,(r,l)=>(n(),o("button",{class:v(["indicator",{active:l===s.value}]),key:`indicator-${l}`,onClick:_=>M(l)},null,10,ae))),128))])):d("",!0)],32)):d("",!0)}}),se=O(le,[["__scopeId","data-v-25c9cb2f"]]);export{se as default};
